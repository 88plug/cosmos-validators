---
# - name: bash
#   import_tasks: bash.yml

- name: sifchain
  import_tasks: sifchain.yml
# cd "${HOME}"/sifnoded/config
# wget -O genesis.json.gz https://raw.githubusercontent.com/Sifchain/networks/master/testnet/sifchain-testnet-1/genesis.json.gz"
# gunzip genesis.json.gz

##################

# - name: Update config files
#   lineinfile:
#     path: '/root/.juno/config/app.toml'
#     regexp: 'minimum-gas-prices '
#     line: 'minimum-gas-prices = "0.025ujunox"'
#     state: present

# - name: get peers
#   uri:
#     url: 'https://raw.githubusercontent.com/CosmosContracts/testnets/main/uni/persistent_peers.txt'
#     return_content: true
#   register: peers

# - name: Set persistent peers
#   lineinfile:
#     path: '/root/.juno/config/config.toml'
#     regexp: 'persistent_peers = ""'
#     line: 'persistent_peers = "{{ peers.content }}"'
#     state: present

# - name: Download genesis file
#   get_url:
#     url: 'https://raw.githubusercontent.com/CosmosContracts/testnets/main/{{ chain_id }}/genesis.json'
#     dest: '/root/.juno/config/genesis.json'
#     mode: '0644'

# export GOROOT=/usr/local/go
# export GOPATH=$HOME/go
# export GO111MODULE=on
# export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin
# export DAEMON_NAME=junod
# export DAEMON_HOME=$HOME/.juno

# - name: Make sure cosmos-sdk folder does not exist
#   file:
#     state: absent
#     path: '/root/cosmos-sdk'

# - name: Clone repo
#   git:
#     repo: https://github.com/cosmos/cosmos-sdk
#     dest: '/root/cosmos-sdk'

# - name: Install cosmos sdk software
#   command: '{{ item }}'
#   args:
#     chdir: '/root/cosmos-sdk'
#   with_items:
#     - 'git checkout v0.42.7'
#     - 'make cosmovisor'
#   environment:
#     PATH: '{{ path }}'

# - name: copy cosmovisor
#   copy:
#     remote_src: true
#     src: /root/cosmos-sdk/cosmovisor/cosmovisor
#     dest: /root/go/bin/cosmovisor
#     owner: root
#     group: root

# - name: copy cosmovisor service file
#   copy:
#     src: cosmovisor.service
#     dest: /etc/systemd/system/cosmovisor.service
#     owner: root
#     group: root
#     mode: '600'

# - name: start cosmovisor service
#   systemd:
#     name: cosmovisor
#     state: restarted
#     daemon_reload: yes
#     enabled: yes
#   changed_when: false

# Download chain and install
